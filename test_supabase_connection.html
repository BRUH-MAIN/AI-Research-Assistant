<!DOCTYPE html>
<html>
<head>
    <title>Test Supabase Connection</title>
</head>
<body>
    <h1>Supabase Connection Test</h1>
    <div id="result">Testing...</div>
    
    <script>
        const supabaseUrl = 'http://localhost:54325';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0';
        
        async function testConnection() {
            const resultDiv = document.getElementById('result');
            try {
                const response = await fetch(`${supabaseUrl}/auth/v1/user`, {
                    headers: {
                        'apikey': supabaseKey,
                        'Authorization': `Bearer ${supabaseKey}`
                    }
                });
                
                if (response.status === 401) {
                    resultDiv.innerHTML = '<span style="color: green;">✅ Connection successful! (401 Unauthorized is expected without a user session)</span>';
                } else {
                    resultDiv.innerHTML = `<span style="color: orange;">⚠️ Unexpected response: ${response.status}</span>`;
                }
            } catch (error) {
                if (error.message.includes('ERR_BLOCKED_BY_CLIENT')) {
                    resultDiv.innerHTML = '<span style="color: red;">❌ Still blocked by ad blocker! Try disabling your ad blocker for localhost.</span>';
                } else {
                    resultDiv.innerHTML = `<span style="color: red;">❌ Connection failed: ${error.message}</span>`;
                }
            }
        }
        
        testConnection();
    </script>
</body>
</html>